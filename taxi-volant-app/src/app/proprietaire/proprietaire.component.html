<app-sidebar></app-sidebar>
<app-navbar></app-navbar>

<!-- Bouton pour afficher la liste des taxis achetés -->
<div class="container">
  

  <!-- Contenu principal de la page -->
  <div class="centered-content">
    <table class="table table-striped table-bordered mt-3">
      <thead class="thead-dark">
        <tr>
          <th>Nom</th>
          <th>Matricule</th>
          <th>Prix</th>
          <th>Photo</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let taxi of taxis">
          <td>{{ taxi.nom }}</td>
          <td>{{ taxi.matricule }}</td>
          <td>{{ taxi.prix }} DT</td>
          <td>
            <img [src]="taxi.photo_de_taxi" alt="Photo du taxi" class="taxi-photo" *ngIf="taxi.photo_de_taxi">
          </td>
          <td>
            <button class="btn btn-primary" (click)="openPopup(taxi.id)">Acheter</button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- Popup de Confirmation -->
  <div *ngIf="isPopupOpen" class="popup">
    <div class="popup-content">
      <h2>Vérifier l'achat</h2>
      <p>Propriétaire ID: {{ proprietaireId }}</p>
      <p>Taxi ID: {{ selectedTaxiId }}</p>
      <button (click)="confirmPurchase()">Vérifier l'achat</button>
      <button (click)="closePopup()">Annuler</button>
    </div>
  </div>

  <!-- Popup pour afficher les taxis achetés -->
  <div *ngIf="isPurchasedTaxisPopupOpen" class="popupp">
    <div class="popup-content">
      <h2>Mes Taxis Achétés</h2>
      <ul>
        <li *ngFor="let taxi of purchasedTaxis">
          {{ taxi.nom }} - {{ taxi.matricule }} - {{ taxi.prix }} DT - {{ taxi.date_achat}}
        </li>
      </ul>
      <button (click)="closePurchasedTaxisPopup()">Fermer</button>
    </div>
  </div>
</div>
